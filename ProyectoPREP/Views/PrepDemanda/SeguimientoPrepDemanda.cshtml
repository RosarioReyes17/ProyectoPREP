@model TblPrepDemandaSeguimiento

<div class="form-title">
    <h4>Seguimientos de la PreP</h4>
</div>

<div divinfo="">

    <h5>Información del Paciente</h5>
    <strong>ID PREP:</strong>
    <span>@ViewBag.IdPred</span>
    <br>

    <strong>Paciente PREP:</strong>
    <span id="spPacienteNombre" name="spEsatus">@ViewBag.Nombre</span>
    <br>

</div>



<form id="formularioSeguimiento" asp-action="SeguimientoPrepDemanda" asp-controller="PrepDemanda" method="post">
    <input type="hidden" id="IdDatos" name="IdDatos" value="@ViewBag.IdPaciente" />
    <input name="" id="Sexo" type="hidden" value="@ViewBag.Sexo" />
    <input name="" id="Edad" type="hidden" value="@ViewBag.Edad" />
    <input name="" id="Peso" type="hidden" value="@ViewBag.Peso" />
    <input name="" id="Genero" type="hidden" value="@ViewBag.Genero" />
    <input name="" id="FechaIngresoSai" type="hidden" value="@ViewBag.FechaIngresoSai" />
    <input name="IdPaciente" id="IdPaciente" type="hidden" value="@ViewBag.IdPaciente" />


    <div id="divFormPrEP">
        <div id="divDatosGenerales" style="border: 2px solid #005476; padding: 10px;">

            <table class="table">
                <tbody>

                    <tr style="display:none">
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>

                        <td colspan="1">
                            <label for="FechaSeguimiento">Fecha de registro de seguimiento:</label>
                            <br />
                            <div class="form-group col-md-8">
                                <input id="FechaSeguimiento"
                                       onchange="quitarValidacionFecha(this)"
                                       data-val="true"
                                       data-val-required="Este campo es obligatorio."
                                       onkeydown="return false"
                                       asp-for="FechaSeguimiento"
                                       name="FechaSeguimiento"
                                       class="form-control col-sm-3 date"
                                       type="date">
                                <span asp-validation-for="FechaSeguimiento" style="color:red; margin-left:20px"></span>
                            </div>
                        </td>


                    </tr>
                    <tr>
                        <td colspan="2">
                            Signos Vitales:
                            <br>
                            <div style="display:flex">

                                <label style="width:26px">TA:</label>
                                <input type="text" asp-for="SignosVitalesTa" style="margin-right:5px" data-val="true" data-val-required="Este campo obligatorio." oninput="this.value = this.value.replace(/[^0-9,/]/,'')" id="SignosVitalesTa" name="SignosVitalesTa" class="form-control2"> mmHg
                                <span asp-validation-for="SignosVitalesTa" style="color:red;margin-left:20px"></span>

                            </div>
                            <br>
                            <div style="display:flex">

                                <label style="width:26px">FC:</label>
                                <input type="text" style="margin-right:5px" id="SignosVitalesFc" asp-for="SignosVitalesFc" data-val="true" data-val-required="Este campo obligatorio." oninput="this.value = this.value.replace(/[^0-9,/]/,'')" name="SignosVitalesFc" class="form-control2"> l/min
                                <span asp-validation-for="SignosVitalesFc" style="color:red;margin-left:30px"></span>

                            </div>
                            <br>
                            <div style="display:flex">

                                <label style="width:26px">FR:</label>

                                <input type="text" style="margin-right:5px" id="SignosVitalesFr" data-val="true" data-val-required="Este campo obligatorio." oninput="this.value = this.value.replace(/[^0-9,/]/,'')" asp-for="SignosVitalesFr" name="SignosVitalesFr" class="form-control2"> r/min
                                <span asp-validation-for="SignosVitalesFr" style="color:red;margin-left:30px"></span>

                            </div>
                        </td>

                        <td colspan="2">
                            Medidas Antropometrícas:

                            <br>
                            <label class="label-width">Peso:</label>
                            <input asp-for="Peso"
                                   id="txtPeso"
                                   name="Peso"
                                   class="form-control"
                                   type="number"
                                   min="90"
                                   max="350"
                                   placeholder="Introduzca su Peso en Lbs."
                                   data-val="true"
                                   data-val-required="Este campo es obligatorio.">
                            <span id="pesoValidationMsg" lang="es-do" style="color:red; margin-left:30px"></span>


                            <br>
                            <label class="label-width">Talla en Pies:</label>
                            <input asp-for="TallaPies"
                                   id="txtTallaPies"
                                   name="TallaPies"
                                   class="form-control"
                                   type="text"
                                   placeholder="Introduzca su Talla en Pies."
                                   data-val="true"
                                   data-val-required="Este campo es obligatorio.">
                            <span id="tallaPiesValidation" lang="es-do" style="color:red; margin-left:30px"></span>


                            <br>
                            <label class="label-width">Talla Pulgadas:</label>
                            <input asp-for="TallaPulgadas"
                                   id="TallaPulgadas"
                                   name="TallaPulgadas"
                                   class="form-control"
                                   type="number"
                                   min="0"
                                   max="12"
                                   placeholder="Introduzca su Talla en Pulgadas.">
                            <span id="tallaPulgadaValidation" lang="es-do" style="color:red; margin-left:30px"></span>





                        </td>
                    </tr>

                    <tr id="VIHp">
                         
                        <td colspan="2">
                            <label>Fecha de realización(Prueba VIH):</label>
                            <br>
                            <div class="form-group col-md-4">
                                <input id="txtFechaRealizacionPrueba" data-val="true" data-val-required="Este campo obligatorio." onchange="quitarValidacionFecha(this)" 
                                    onkeydown="return false" asp-for="FechaPruebaVih" name="FechaPruebaVih" class="form-control col-3 date" type="date">
                                <span asp-validation-for="FechaPruebaVih" style="color:red;margin-left:20px"></span>

                            </div>
                        </td>
                        <td colspan="2">
                            Repetición de la Prueba VIH:
                            <br>
                            Resultado:
                            <div class="radio radio-info">
                                <input id="rdVIH1" class="styled" style="margin-left:0px;" data-val="true" data-val-required="Este campo obligatorio." onclick="resultadoVIH(value);" type="radio" asp-for="ResultadoPruebaVih" name="ResultadoPruebaVih" value="Negativo">
                                <label for="rdVIH1">
                                    Negativo.
                                </label>

                            </div>

                            <div class="radio radio-info">
                                <input id="rdVIH2" class="styled" style="margin-left: 0px;" data-val="true" data-val-required="Este campo obligatorio." type="radio" onclick="resultadoVIH(value);" asp-for="ResultadoPruebaVih" name="ResultadoPruebaVih" value="Positivo">
                                <label for="rdVIH2">

                                    Positivo
                                </label>
                            </div>
                            <span asp-validation-for="ResultadoPruebaVih" style="color:red;margin-left:20px"></span>

                        </td>
                    </tr>
                    <tr>
                        <td colspan="1">
                            <label>¿Se consultó acerca de los signos y síntomas de infección aguda por VIH?</label>
                            <div class="radio radio-info">
                                <input id="chkconsultaVIH1" style="margin-left:0px;" name="ConsultaSignosInfeccion" class="styled" type="radio" value="Si" onclick="handleRadioChange(this.value);">
                                <label for="chkconsultaVIH1">Si</label>
                            </div>
                            <div class="radio radio-info">
                                <input id="chkconsultaVIH2" style="margin-left:0px;" name="ConsultaSignosInfeccion" class="styled" type="radio" value="No" onclick="handleRadioChange(this.value);">
                                <label for="chkconsultaVIH2">No</label>
                            </div>
                            <span id="radioValidationMessage" style="color:red; display:none;">Este campo es obligatorio.</span>
                        </td>
                        <td colspan="1" style="width:310px">
                            <input type="checkbox" id="check1" name="Linfadenopatias" class="chSignos" disabled value="true"> Linfadenopatias cervicales e inguinales
                            <br>
                            <input type="checkbox" id="check2" name="FiebreDesconocida" class="chSignos" disabled value="true"> Fiebre de origen desconocido
                            <br>
                            <input type="checkbox" id="check3" name="DiarreaProlongada" class="chSignos" disabled value="true"> Diarrea prolongada de origen desconocido
                            <br>
                            <input type="checkbox" id="check4" name="ErupcionesPiel" class="chSignos" disabled value="true"> Erupciones en la piel
                            <br>
                            <input type="checkbox" id="check5" name="InfeccionesRecurrentes" class="chSignos" disabled value="true"> Infecciones Recurrentes
                            <br>
                            <input type="checkbox" id="check6" name="HepatoEsplenomegalia" class="chSignos" disabled value="true"> Hepato/esplenomegalia
                            <br>
                            <span id="checkboxValidationMessage" style="color:red; display:none;">Debes seleccionar al menos una opción de los signos y síntomas.</span>
                        </td>
                    </tr>

                  @*   <tr>
                        <td colspan="2">
                            <label>¿Desea realizar la prueba de Sifilis?</label>
                            <input onchange="mostrarSifilis();" type="checkbox" id="vihS" />
                        </td>
                    </tr>

                    <tr>
                        <td colspan="2">
                            <label>¿Desea realizar la prueba de Sifilis y Hepatitis?</label>
                            <input onchange="mostrarHepatitis();" type="checkbox" id="vihH" />
                        </td>
                    </tr> *@


                    <tr id="sifilisBC">

                        <td id="sifilis" colspan="1">


                            <div class="form-group radio">
                                Sifilis(VDRL) Realizada:
                                <input onchange="mostrarSifilis();" type="checkbox" id="vihS" />
                                <br />
                                <br />

                                <div style="margin-left: 24px;">
                                    <input id="rdsifilis1" asp-for="Sifilis" disabled data-val="true" data-val-required="Este campo es obligatorio." class=" habilitarSifilis styled segundaParte" type="radio" name="Sifilis" value="No Reactivo">
                                    <label for="rdsifilis1">No Reactivo</label>


                                </div>
                                <div style="margin-left: 24px;">
                                    <input id="rdsifilis2" disabled asp-for="Sifilis" class="styled habilitarSifilis segundaParte" type="radio" name="Sifilis" value="Reactivo">
                                    <label for="rdsifilis2">Reactivo</label>
                                </div>
                                <span asp-validation-for="Sifilis" style="color:red;"></span>

                                <br />
                                <input id="txtfechasifilis1" data-val="true" disabled data-val-required="Este campo es obligatorio."
                                       name="SifilisFecha" asp-for="Sifilis" onkeydown="return false" class="form-control col-sm-2 date habilitarSifilis segundaParte"
                                       type="date" style="display:initial;width: 155px;" placeholder="Fecha"
                                       onchange="quitarValidacionFecha(this)" />									<br />
                                <br />
                                <span asp-validation-for="SifilisFecha" style="color:red;"></span>
                            </div>


                        </td>
                        <td id="hepatitisB" colspan="2">


                            <div class="form-group radio ">
                                HBsAg Realizada:
                                <input onchange="mostrarHepatitis();" type="checkbox" id="vihH" />

                                <br />
                                <br />

                                <div style="margin-left: 24px;">
                                    <input id="rdHBsAg1" asp-for="HbsAg" data-val="true" disabled data-val-required="Este campo es obligatorio." class="styled habilitarSifilisB segundaParte" type="radio" name="HbsAg" value="Negativo">
                                    <label for="rdHBsAg1">Negativo</label>
                                </div>

                                <div style="margin-left: 24px;">
                                    <input id="rdHBsAg2" asp-for="HbsAg" disabled class="styled habilitarSifilisB segundaParte" type="radio" name="HbsAg" value="Positivo">
                                    <label for="rdHBsAg2">Positivo</label>
                                </div>
                                <span asp-validation-for="HbsAg" style="color:red;"></span>
                                <br />

                                <input id="txtfechaHBsAg1" asp-for="HbsAgFecha" disabled data-val="true" data-val-required="Este campo es obligatorio."
                                       onkeydown="return false" name="HbsAgFecha" class="form-control habilitarSifilisB col-sm-5  date segundaParte"
                                       type="date" style="display:initial;width: 155px;" placeholder="Fecha" onchange="quitarValidacionFecha(this)" />									<br />
                                <br />
                                <span asp-validation-for="HbsAgFecha" style="color:red;"></span>
                            </div>
                        </td>

                        <td style="" id="hepatitisC" colspan="1">

                            <div class="form-group radio">
                                Hepatitis C Realizada:
                                <input onchange="mostrarHepatitisC();" type="checkbox" id="vihHC" />

                                <br />
                                <br />
                                <div style="margin-left:24px">
                                    <input id="rdHepatitis1" asp-for="HepatitisC" disabled data-val="true" data-val-required="Este campo es obligatorio." class="styled habilitarSifilisC segundaParte" type="radio" name="HepatitisC" value="Negativo">
                                    <label for="rdHepatitis1">Negativo</label>
                                </div>

                                <div style="margin-left:24px">
                                    <input id="rdHepatitis2" asp-for="HepatitisC" disabled class="styled habilitarSifilisC segundaParte" type="radio" name="HepatitisC" value="Positivo">
                                    <label for="rdHepatitis2">Positivo</label>
                                </div>
                                <span asp-validation-for="HepatitisC" style="color:red;"></span>

                                <br />
                                <input id="txtfechaHepatitis" onkeydown="return false" disabled asp-for="HepatitisCFecha" data-val="true"
                                       data-val-required="Este campo es obligatorio." name="HepatitisCFecha" class="form-control habilitarSifilisC col-sm-8 date segundaParte"
                                       type="date" style="display:initial;width: 155px;" placeholder="Fecha"
                                       onchange="quitarValidacionFecha(this)" />									<br />
                                <br />
                                <span asp-validation-for="HepatitisCFecha" style="color:red;"></span>
                            </div>
                        </td>

                    </tr>
                                                 
                
                    <tr>


                        <td id="idcheckarv">
                            <strong>PrEP(ARV) Prescrita:</strong>
                            <br>
                            <input id="td1" onclick="validateCheckboxes();" name="PrepArvTdfFtc" value="true" class="styled" type="checkbox"> TDF/FTC <br>
                            <input id="td2" onclick="validateCheckboxes();" name="PrepArvTdf3tc" class="styled" value="true" type="checkbox"> TDF/3TC <br>
                            <input id="td3" onclick="validateCheckboxes();" name="PrepArvTafFtc" class="styled" value="true" type="checkbox"> TAF/FTC <br>
                            <span id="error-message" style="color:red; display:none;">
                                Debe seleccionar <br> al menos una opción.
                            </span>
                        </td>

                        <td>

                            <strong>Meses de prescripción</strong>

                            <select id="Meses_prescripcion" required name="MesesPrescripcion" asp-for="MesesPrescripcion" data-val="true" data-val-required="Este campo es obligatorio." class="form-control" autocomplete="error">
                                <option value="">--Seleccione--</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                            </select>
                            <span asp-validation-for="MesesPrescripcion" style="color:red;"></span>

                        </td>
                       
                    </tr>
                 
                </tbody>
            </table>
        </div>
    </div>
    <br />
    <br />

    <div style="margin-block-end:40px">
        <button type="submit" name="Ejecutar" onclick="validateCheckboxes()" id="Ejecutar" class="btn btn-primary"><i class="glyphicon glyphicon-saved"></i>Registrar Seguimiento</button>
        <a href="javascript:history.back();" class="btn btn-danger" style="margin-left: 5px;">
            <i class="glyphicon glyphicon-remove"></i> Cancelar
        </a>
    </div>

    <div class="modal" id="menor" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" style="color:red; margin-left: 90px;">
                        Advertencia
                    </h5>
                    <button type="button" onclick="cerrarModalMenor();" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p id="cuerpoModalMenor" style="text-align:center">El ciudadano tiene un aclaramiento de creatinina(TfGe) menor 60ml/min. El formulario se da por terminado y rechazada la solicitud.</p>

                </div>
                <div class="modal-footer">
                    <button type="button" onclick="creatininaMenor60();" class="btn btn-secondary " data-dismiss="modal">Aceptar</button>
                    <button type="button" onclick="cerrarModalMenor();" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="vih" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" style="color:red; margin-left: 90px;">
                        Advertencia
                    </h5>
                    <button type="button" onclick="cerrarModalVIH();" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p id="cuerpoModalvih" style="text-align:center">La persona registrada no es legible para PREP porque tiene un resultado VIH+.</p>

                </div>
                <div class="modal-footer">
                    <button type="button" onclick="VIHPositivo();" class="btn btn-secondary " data-dismiss="modal">Aceptar</button>
                    <button type="button" onclick="cerrarModalVIH();" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="myModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" style="color:red; margin-left: 90px;">
                        Advertencia
                    </h5>
                    <button type="button" onclick="cerrarModal();" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p id="cuerpoModal" style="text-align:center"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" onclick="cerrarModal();" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>



</form>

<div class="modal" id="menor" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" style="color:red; margin-left: 90px;">
                    Advertencia
                </h5>
                <button type="button" onclick="cerrarModalMenor();" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p id="cuerpoModalMenor" style="text-align:center">El ciudadano tiene un aclaramiento de creatinina(TfGe) menor 60ml/min. El formulario se da por terminado y rechazada la solicitud.</p>

            </div>
            <div class="modal-footer">
                <button type="button" onclick="paginaPrincipal();" class="btn btn-secondary " data-dismiss="modal">Aceptar</button>
                <button type="button" onclick="cerrarModalMenor();" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
            </div>
        </div>
    </div>
</div>


<style>
    input[type=radio] {
        margin-left: 0px
    }

    .styled {
        /* Agrega aquí tu estilo personalizado */
        margin-left: 0px; /* Por ejemplo, margen derecho para separarlos */
    }

    #styled {
        /* Agrega aquí tu estilo personalizado */
        margin-left: 0px; /* Por ejemplo, margen derecho para separarlos */
    }
</style>


@section scripts{

	<script type="text/javascript">

        var mostrarSifilis = () => {
            var vihS = document.getElementById("vihS").checked;

            if (vihS) {
                $(".habilitarSifilis").removeAttr("disabled");
            } else {
                $(".habilitarSifilis").attr("disabled", true);
                $(".habilitarSifilis").prop("checked", false); // Limpiar selección de los radios
                $(".habilitarSifilis[type='date']").val(''); // Limpiar campos de fecha
            }
        }

        var mostrarHepatitis = () => {
            var vihH = document.getElementById("vihH").checked;

            if (vihH) {
                $(".habilitarSifilisB").removeAttr("disabled");
            } else {
                $(".habilitarSifilisB").attr("disabled", true);
                $(".habilitarSifilisB").prop("checked", false); // Limpiar selección de los radios
                $(".habilitarSifilisB[type='date']").val(''); // Limpiar campos de fecha
            }
        }

        var mostrarHepatitisC = () => {
            var vihHC = document.getElementById("vihHC").checked;

            if (vihHC) {
                $(".habilitarSifilisC").removeAttr("disabled");
            } else {
                $(".habilitarSifilisC").attr("disabled", true);
                $(".habilitarSifilisC").prop("checked", false); // Limpiar selección de los radios
                $(".habilitarSifilisC[type='date']").val(''); // Limpiar campos de fecha

            }
        }

        var mostrarVIH = (e) => {

            if (e == "Si") {
                $(".habilitarVIH").removeAttr("disabled");
            } else {
                $(".habilitarVIH").attr("disabled", true);
                $(".habilitarVIH").prop("checked", false); // Limpiar selección de los radios
                $(".habilitarVIH[type='date']").val(''); // Limpiar campos de fecha

            }
        }


        var tieneSintomas = (e) => {
            var valor = e;

            if (valor == "Si") {
                $(".chSignos").removeAttr("disabled");

            }

            if (valor == "No") {
                $(".chSignos").attr("disabled", true);

            }
        }
       
        function cerrarModalMenor() {
            $('#menor').modal('hide'); // Cierra el modal
        }


        const menorCreatina = () => {
            var creatina = document.getElementById("ResultadoCreatinina").value;

            if (creatina < 60) {
                $('#menor').modal('show');


            } else {
                document.getElementById("chkaclaramiento2").checked = true;
            }
        }


        const calcularCreatinina = () => {
            var KG = 2.205;
            var Edad = document.getElementById("Edad").value;
            var Peso = document.getElementById("Peso").value;
            var sexo = document.getElementById("Sexo").value;
            var genero = document.getElementById("Genero").value;
            var chkHormonal = document.getElementById("chkHormonal").checked;
            var PesoKG = Peso / KG;

            var valorCreatinina = document.getElementById("CreatininaValor").value;

            if (genero == "3" && chkHormonal == true) {
                var Resultado = ((140 - Edad) * PesoKG * 0.85) / (72 * valorCreatinina);
                document.getElementById("ResultadoCreatinina").value = Resultado.toFixed(3);
                setTimeout(menorCreatina, 1000);

            }
            if (genero == "1") {

                var Resultado = ((140 - Edad) * PesoKG) / (72 * valorCreatinina);
                document.getElementById("ResultadoCreatinina").value = Resultado.toFixed(3);

            }


            if (genero == "2") {
                var Resultado = ((140 - Edad) * PesoKG * 0.85) / (72 * valorCreatinina);
                document.getElementById("ResultadoCreatinina").value = Resultado.toFixed(3);

            }
            if (genero == "3" && chkHormonal == false) {

                var Resultado = ((140 - Edad) * PesoKG) / (72 * valorCreatinina);
                document.getElementById("ResultadoCreatinina").value = Resultado.toFixed(3);
            }

            if (sexo == "M" && genero == "4") {

                var Resultado = ((140 - Edad) * PesoKG) / (72 * valorCreatinina);
                document.getElementById("ResultadoCreatinina").value = Resultado.toFixed(3);

            }

            if (sexo == "F" && genero == "4") {

                var Resultado = ((140 - Edad) * PesoKG) / (72 * valorCreatinina);
                document.getElementById("ResultadoCreatinina").value = Resultado.toFixed(3);

            }
            // Hombres:[140-(edad) x Peso(Kg)]/[72 x Creatinina plasmatica]
            // Mujeres:[140-(edad) x Peso(Kg) x 0.85]/[72 x Creatinina plasmatica]
            setTimeout(menorCreatina, 1000);
        }

        var ARV = (e) => {
            var td1 = document.getElementById("td1").checked;
            var td2 = document.getElementById("td2").checked;
            var td3 = document.getElementById("td3").checked;

            if (e == "td1") {
                document.getElementById("td2").checked = false;
                document.getElementById("td3").checked = false;

            }
            if (e == "td2") {
                document.getElementById("td1").checked = false;
                document.getElementById("td3").checked = false;

            }
            if (e == "td3") {
                document.getElementById("td1").checked = false;
                document.getElementById("td2").checked = false;

            }
        }

        const paginaPrincipal = () => {
            var local = window.location.host;
            console.log(local);
            var origin = "/PrepDemanda/HomePrepDemanda";
            window.location.href = "https://" + local + origin;
        }

        function validateCheckboxes() {
            // Obtén los checkboxes dentro del <td> con id "idcheckarv"
            const checkboxes = document.querySelectorAll('#idcheckarv input[type="checkbox"]');
            const errorMessage = document.getElementById('error-message');

            // Verifica si al menos uno está seleccionado
            const isChecked = Array.from(checkboxes).some(checkbox => checkbox.checked);

            if (isChecked) {
                // Oculta el mensaje de error si al menos un checkbox está seleccionado
                errorMessage.style.display = 'none';
                return true; // Permite el envío del formulario
            } else {
                // Muestra el mensaje de error si ninguno está seleccionado
                errorMessage.style.display = 'block';
                return false; // Evita el envío del formulario
            }
        }

        // Evento para que el mensaje desaparezca al presionar cualquier checkbox
        document.querySelectorAll('#idcheckarv input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                const errorMessage = document.getElementById('error-message');
                if (checkbox.checked) {
                    errorMessage.style.display = 'none';
                }
            });
        });

        function quitarValidacionFecha(element) {
			// Remover mensaje de validación y clase de error
			$(element).removeClass("input-validation-error");
			$(element).closest('.form-group').find("span.field-validation-error")
				.addClass("field-validation-valid")
				.removeClass("field-validation-error")
				.text('');
		}


        document.addEventListener("DOMContentLoaded", function () {
            // Agregar un controlador de eventos al formulario
            const formulario = document.getElementById("formularioSeguimiento");

            if (formulario) {
                formulario.addEventListener("submit", function (event) {
                    // Validar el campo de talla
                    if (!validarTalla()) {
                        event.preventDefault(); // Evitar el envío del formulario
                    }
                });
            }

            function validarTalla() {
                const tallaInput = document.getElementById("TallaPulgadas");
                const errorSpan = document.getElementById("tallaPulgadaValidation");

                if (!tallaInput || !errorSpan) return false; // Prevenir errores si falta algún elemento

                const talla = parseFloat(tallaInput.value); // Convertir a número
                const tallaMin = parseFloat(tallaInput.min);
                const tallaMax = parseFloat(tallaInput.max);

                // Validar si el campo está vacío o no es un número
                if (isNaN(talla)) {
                    errorSpan.textContent = "Este campo es obligatorio.";
                    return false;
                }

                // Validar si el valor está fuera del rango
                if (talla < tallaMin || talla > tallaMax) {
                    errorSpan.textContent = `Este número debe estar entre ${tallaMin} y ${tallaMax}.`;
                    return false;
                }

                // Limpiar el mensaje de error si todo está bien
                errorSpan.textContent = "";
                return true;
            }
        });



        document.addEventListener("DOMContentLoaded", function () {
            // Agregar un controlador de eventos al formulario
            const formulario = document.getElementById("formularioSeguimiento");

            if (formulario) {
                formulario.addEventListener("submit", function (event) {
                    // Validar el campo de peso
                    if (!validarPeso()) {
                        event.preventDefault(); // Evitar el envío del formulario
                    }
                });
            }

            function validarPeso() {
                const pesoInput = document.getElementById("txtPeso");
                const errorSpan = document.getElementById("pesoValidationMsg");

                if (!pesoInput || !errorSpan) return false; // Prevenir errores si falta algún elemento

                const peso = parseFloat(pesoInput.value); // Convertir a número
                const pesoMin = parseFloat(pesoInput.min);
                const pesoMax = parseFloat(pesoInput.max);

                // Validar si el campo está vacío o no es un número
                if (isNaN(peso)) {
                    errorSpan.textContent = "Este campo es obligatorio.";
                    return false;
                }

                // Validar si el valor está fuera del rango
                if (peso < pesoMin || peso > pesoMax) {
                    errorSpan.textContent = `El peso debe estar entre ${pesoMin} y ${pesoMax} libras.`;
                    return false;
                }

                // Limpiar el mensaje de error si todo está bien
                errorSpan.textContent = "";
                return true;
            }
        });


        document.addEventListener("DOMContentLoaded", function () {
            const tallaInput = document.getElementById("txtTallaPies");
            const errorSpan = document.getElementById("tallaPiesValidation");
            const formulario = document.getElementById("formularioSeguimiento");

            if (tallaInput && formulario) {
                // Validación en tiempo real para permitir solo números
                tallaInput.addEventListener("input", function () {
                    const valor = tallaInput.value;

                    // Permitir solo números
                    if (!/^\d*$/.test(valor)) {
                        tallaInput.value = valor.replace(/\D/g, ""); // Eliminar caracteres no numéricos
                    }

                    // Limpiar el mensaje de error en tiempo real si se corrige
                    if (tallaInput.value.trim() !== "") {
                        errorSpan.textContent = "";
                    }
                });

                // Validación al enviar el formulario
                formulario.addEventListener("submit", function (event) {
                    const valor = tallaInput.value.trim();

                    if (valor === "") {
                        // Mostrar error si está vacío
                        errorSpan.textContent = "Este campo es obligatorio.";
                        event.preventDefault(); // Evitar envío del formulario
                    }
                });
            }
        });



        function handleRadioChange(value) {
            const checkboxes = document.querySelectorAll('.chSignos');
            const checkboxValidationMessage = document.getElementById('checkboxValidationMessage');
            const radioValidationMessage = document.getElementById('radioValidationMessage');

            // Ocultar mensaje de validación del radio
            radioValidationMessage.style.display = "none";

            if (value === "Si") {
                checkboxes.forEach(cb => {
                    cb.disabled = false; // Habilitar los checkboxes
                    // Escuchar cambios en tiempo real
                    cb.addEventListener('change', handleCheckboxValidation);
                });
                // Mostrar mensaje si no hay ninguno seleccionado
                handleCheckboxValidation();
            } else {
                // Deshabilitar y desmarcar checkboxes, ocultar mensaje de validación
                checkboxes.forEach(cb => {
                    cb.disabled = true;
                    cb.checked = false;
                    cb.removeEventListener('change', handleCheckboxValidation);
                });
                checkboxValidationMessage.style.display = "none";
            }
        }

        function handleCheckboxValidation() {
            const checkboxes = document.querySelectorAll('.chSignos');
            const checkboxValidationMessage = document.getElementById('checkboxValidationMessage');
            const anyChecked = Array.from(checkboxes).some(cb => cb.checked);
            // Mostrar u ocultar mensaje según el estado de los checkboxes
            checkboxValidationMessage.style.display = anyChecked ? "none" : "inline";
        }

        // Validar radios al enviar el formulario
        function validateForm(event) {
            const radios = document.querySelectorAll('input[name="ConsultaSignosInfeccion"]');
            const checkboxes = document.querySelectorAll('.chSignos');
            const radioValidationMessage = document.getElementById('radioValidationMessage');
            const checkboxValidationMessage = document.getElementById('checkboxValidationMessage');

            const isRadioSelected = Array.from(radios).some(radio => radio.checked);
            const anyCheckboxChecked = Array.from(checkboxes).some(cb => cb.checked);

            // Validar radios
            if (!isRadioSelected) {
                radioValidationMessage.style.display = "inline";
                event.preventDefault();
            } else {
                radioValidationMessage.style.display = "none";
            }

            // Validar checkboxes solo si "Si" está seleccionado
            const selectedRadio = document.querySelector('input[name="ConsultaSignosInfeccion"]:checked');
            if (selectedRadio && selectedRadio.value === "Si" && !anyCheckboxChecked) {
                checkboxValidationMessage.style.display = "inline";
                event.preventDefault();
            } else {
                checkboxValidationMessage.style.display = "none";
            }
        }

        // Asignar la validación al evento submit del formulario
        document.querySelector('form').addEventListener('submit', validateForm);

    </script>
}

@* @section scripts{
    <script type="text/javascript">

        window.onload = function () {
            var sexo = document.getElementById("sexo").value;
            var fechaIngreso = new Date(document.getElementById("FechaIngresoSai").value);
            var minDateIngreso = new Date(fechaIngreso.setDate(fechaIngreso.getDate() - 0)).toISOString().split("T")[0];

            if (sexo == "F") {
                $(".lactante").removeAttr("disabled");
                document.getElementById("embarazada").style.display = "";
                document.getElementById("lactante").style.display = "";
            }

            document.getElementById("txtFechaSeguimiento").setAttribute('min', minDateIngreso);

        }

        var habilitarInputHBsAg = (e) => {
            var valor = e;
            if (valor == "Positivo") {

                $("#cuerpoModal").empty();
                document.getElementById("cuerpoModal").innerHTML = "Referir a servicio médico especializado";
                $('#myModal').modal('show');

            }

        }

        var habilitarInputHepatitis = (e) => {
            var valor = e;
            if (valor == "Positivo") {

                $("#cuerpoModal").empty();
                document.getElementById("cuerpoModal").innerHTML = "Referir a servicio médico especializado";
                $('#myModal').modal('show');

            }

        }

        var mostrarCreatinina = () => {

            var vihC = document.getElementById("vihC").checked;

            if (vihC == true) {
                $(".habilitarCreatinina").removeAttr("disabled");
                //document.getElementById("creatinina").style.display = "";

            }
            else {
                // document.getElementById("creatinina").style.display = "none";
                $(".habilitarCreatinina").attr("disabled", true);

            }

            var genero = document.getElementById("genero").value;
            if (genero == "1") {
                $("#chkHormonal").attr("disabled", true);

            }
        }

        var mostrarSifilis = () => {

            var vihS = document.getElementById("vihS").checked;

            if (vihS == true) {
                document.getElementById("vihH").checked = false;
                mostrarHepatitis();

                // document.getElementById("sifilisBC").style.display = "";
                // document.getElementById("hepatitisB").style.display = "none";
                // document.getElementById("hepatitisC").style.display = "none";

                $("#rdsifilis1").removeAttr("disabled");
                $("#rdsifilis2").removeAttr("disabled");
                $("#txtfechasifilis1").removeAttr("disabled");

            }
            else {
                // document.getElementById("sifilisBC").style.display = "none";
                // document.getElementById("hepatitisB").style.display = "";
                // document.getElementById("hepatitisC").style.display = "";

                $("#rdsifilis1").attr("disabled", true);
                $("#rdsifilis2").attr("disabled", true);
                $("#txtfechasifilis1").attr("disabled", true);

            }
        }

        var mostrarHepatitis = () => {

            var vihH = document.getElementById("vihH").checked;

            if (vihH == true) {
                document.getElementById("vihS").checked = false;
                mostrarSifilis();
                // document.getElementById("sifilisBC").style.display = "";
                $(".habilitarSifilisBC").removeAttr("disabled");

            } else {
                // document.getElementById("sifilisBC").style.display = "none";
                $(".habilitarSifilisBC").attr("disabled", true);

            }
        }

        const cerrarModalMenor = () => {

            document.getElementById("CreatininaValor").value = "";
            document.getElementById("ResultadoCreatinina").value = "";
            $('#menor').modal('hide');


        }
        const cerrarModalVIH = () => {

            $('#vih').modal('hide');
        }

        const cerrarModal = () => {

            $('#myModal').modal('hide');
        }


        const creatininaMenor60 = () => {

            var IdDatos = document.getElementById("IdDatos").value;
            var FechaRegistroSeguimiento = document.getElementById("txtFechaSeguimiento").value;
            var SignosVitalesTa = document.getElementById("SignosVitalesTa").value;
            var SignosVitalesFc = document.getElementById("SignosVitalesFc").value;
            var SignosVitalesFr = document.getElementById("SignosVitalesFr").value;
            var Peso = document.getElementById("Peso").value;
            var TallaPies = document.getElementById("TallaPies").value;
            var TallaPulgadas = document.getElementById("TallaPulgadas").value;

            $.post("@Url.Action("CreatininaMenor60","Seguimientos")", {
                IdDatos: IdDatos, FechaRegistroSeguimiento: FechaRegistroSeguimiento, SignosVitalesTa: SignosVitalesTa,
                SignosVitalesFc: SignosVitalesFc, SignosVitalesFr: SignosVitalesFr, Peso: Peso, TallaPies: TallaPies,
                TallaPulgadas: TallaPulgadas
            }, function (modelos) {
                setTimeout(paginaPrincipal, 1000);

                // paginaPrincipal();
            })
        }

        const menorCreatina = () => {
            var creatina = document.getElementById("ResultadoCreatinina").value;

            if (creatina < 60) {
                $('#menor').modal('show');


            }
        }

        const calcularCreatinina = () => {
            var KG = 2.205;
            var Edad = @ViewBag.Edad;
            var Peso = @ViewBag.Peso;
            var sexo = document.getElementById("sexo").value;
            var genero = document.getElementById("genero").value;
            var chkHormonal = document.getElementById("chkHormonal").checked;
            var PesoKG = Peso / KG;

            var valorCreatinina = document.getElementById("CreatininaValor").value;

            if (genero == "3" && chkHormonal == true) {
                var Resultado = ((140 - Edad) * PesoKG * 0.85) / (72 * valorCreatinina);
                document.getElementById("ResultadoCreatinina").value = Resultado.toFixed(3);
                setTimeout(menorCreatina, 1000);

            }
            if (genero == "1") {

                var Resultado = ((140 - Edad) * PesoKG) / (72 * valorCreatinina);
                document.getElementById("ResultadoCreatinina").value = Resultado.toFixed(3);

            }


            if (genero == "2") {
                var Resultado = ((140 - Edad) * PesoKG * 0.85) / (72 * valorCreatinina);
                document.getElementById("ResultadoCreatinina").value = Resultado.toFixed(3);

            }
            if (genero == "3" && chkHormonal == false) {

                var Resultado = ((140 - Edad) * PesoKG) / (72 * valorCreatinina);
                document.getElementById("ResultadoCreatinina").value = Resultado.toFixed(3);
            }

            if (sexo == "M" && genero == "4") {

                var Resultado = ((140 - Edad) * PesoKG) / (72 * valorCreatinina);
                document.getElementById("ResultadoCreatinina").value = Resultado.toFixed(3);

            }

            if (sexo == "F" && genero == "4") {

                var Resultado = ((140 - Edad) * PesoKG) / (72 * valorCreatinina);
                document.getElementById("ResultadoCreatinina").value = Resultado.toFixed(3);

            }
            // Hombres:[140-(edad) x Peso(Kg)]/[72 x Creatinina plasmatica]
            // Mujeres:[140-(edad) x Peso(Kg) x 0.85]/[72 x Creatinina plasmatica]
            setTimeout(menorCreatina, 1000);
        }

        const calcularCreatininaCheck = () => {
            var chkHormonal = document.getElementById("chkHormonal").checked;
            var valorCreatinina = document.getElementById("CreatininaValor").value;
            if (chkHormonal == false && valorCreatinina == "") {
                return;
            }
            if (chkHormonal == false && valorCreatinina != "") {
                calcularCreatinina();
            }
            if (chkHormonal == true && valorCreatinina == "") {
                return;
            }
            if (chkHormonal == true && valorCreatinina != "") {
                calcularCreatinina();
            }




        }

        const VIHPositivo = () => {
            var IdDatos = document.getElementById("IdDatos").value;
            var FechaRegistroSeguimiento = document.getElementById("txtFechaSeguimiento").value;
            var SignosVitalesTa = document.getElementById("SignosVitalesTa").value;
            var SignosVitalesFc = document.getElementById("SignosVitalesFc").value;
            var SignosVitalesFr = document.getElementById("SignosVitalesFr").value;
            var Peso = document.getElementById("Peso").value;
            var TallaPies = document.getElementById("TallaPies").value;
            var TallaPulgadas = document.getElementById("TallaPulgadas").value;
            var FechaPruebaVih = document.getElementById("txtFechaRealizacionPrueba").value;
            var ResultadoPruebaVih = document.getElementById("rdVIH2").value;

            $.post("@Url.Action("VIHPositivo","Seguimientos")", {
                IdDatos: IdDatos, FechaRegistroSeguimiento: FechaRegistroSeguimiento, SignosVitalesTa: SignosVitalesTa,
                SignosVitalesFc: SignosVitalesFc, SignosVitalesFr: SignosVitalesFr, Peso: Peso, TallaPies: TallaPies,
                TallaPulgadas: TallaPulgadas, FechaPruebaVih: FechaPruebaVih, ResultadoPruebaVih: ResultadoPruebaVih
            }, function (modelos) {
                console.log(modelos);
                setTimeout(paginaPrincipal, 1000);
                // paginaPrincipal();
            });
        }

        var resultadoVIH = (e) => {
            var valor = e;

            if (valor == "Negativo") {
                $("#chkNoSignos1").removeAttr("disabled");
                $("#chkNoSignos2").removeAttr("disabled");

            }

            if (valor == "Positivo") {
                //$("#cuerpoModal").empty();
                // document.getElementById("cuerpoModal").innerHTML = "El ciudadano debe ser referido al programa nacional VIH. El formulario se da por terminado y rechaza la solicitud";
                $('#vih').modal('show');
                //VIHPositivo();
                //
                document.getElementById("rdVIH2").checked = false;
            }

        }


        const paginaPrincipal = () => {
            var local = window.location.host;
            console.log(local);
            var origin = "/DatosGenerales/DatosGeneralesPorElegibilidad";
            window.location.href = "https://" + local + origin;
        }


        var tieneSintomas = (e) => {
            var valor = e;

            if (valor == "Si") {
                $(".chSignos").removeAttr("disabled");

            }

            if (valor == "No") {
                $(".chSignos").attr("disabled", true);

            }
        }

        var habilitarInputsindrómico = (e) => {
            var valor = e;
            if (valor == "Si") {

                $(".sindromico").removeAttr("disabled");

            }
            if (valor == "No") {
                $(".sindromico").attr("disabled", true);

            }

        }

        var ARV = (e) => {
            var td1 = document.getElementById("td1").checked;
            var td2 = document.getElementById("td2").checked;
            var td3 = document.getElementById("td3").checked;

            if (e == "td1") {
                document.getElementById("td2").checked = false;
                document.getElementById("td3").checked = false;

            }
            if (e == "td2") {
                document.getElementById("td1").checked = false;
                document.getElementById("td3").checked = false;

            }
            if (e == "td3") {
                document.getElementById("td1").checked = false;
                document.getElementById("td2").checked = false;

            }
        }


        var diferenciaFecha = () => {
            var fechaPrueba = new Date(document.getElementById("txtFechaSeguimiento").value);
            var fechaPrueba1 = new Date(document.getElementById("txtFechaSeguimiento").value);

            var minDate = new Date(fechaPrueba.setDate(fechaPrueba.getDate() - 6)).toISOString().split("T")[0];
            var max = new Date(fechaPrueba1.setDate(fechaPrueba1.getDate() - 0)).toISOString().split("T")[0];

            var minDateSeguimiento = new Date(fechaPrueba1.setDate(fechaPrueba1.getDate() - 0)).toISOString().split("T")[0];

            document.getElementById("FechaProximoSeguimiento").setAttribute('min', minDateSeguimiento);

            document.getElementById("txtFechaRealizacionPrueba").setAttribute('min', minDate);
            document.getElementById("txtFechaRealizacionPrueba").setAttribute('max', max);

            document.getElementById("txtfechasifilis1").setAttribute('min', minDate);
            document.getElementById("txtfechasifilis1").setAttribute('max', max);

            document.getElementById("txtfechaHBsAg1").setAttribute('min', minDate);
            document.getElementById("txtfechaHBsAg1").setAttribute('max', max);

            document.getElementById("txtfechaHepatitis").setAttribute('min', minDate);
            document.getElementById("txtfechaHepatitis").setAttribute('max', max);

        }

        document.addEventListener("DOMContentLoaded", function () {
            // Agregar un controlador de eventos al formulario
            var formulario = document.getElementById("formularioSeguimiento");
            if (formulario) {
                formulario.addEventListener("submit", function (event) {
                    // Obtener el valor del campo de talla
                    var tallaInput = document.getElementById("TallaPulgadas");
                    if (tallaInput) {
                        var talla = parseFloat(tallaInput.value); // Convertir a número
                        var tallaMin = parseFloat(tallaInput.min);
                        var tallaMax = parseFloat(tallaInput.max);

                        // Verificar si el campo de talla está vacío o no es un número
                        if (isNaN(talla) || tallaInput.value.trim() === "") {
                            // Mostrar mensaje de error para campo obligatorio
                            document.getElementById("tallaPulgadaValidation").innerText = "Este campo es obligatorio.";
                            // Evitar el envío del formulario
                            event.preventDefault();
                        } else if (talla < tallaMin || talla > tallaMax) {
                            // Mostrar mensaje de error para valor fuera del rango
                            document.getElementById("tallaPulgadaValidation").innerText = "Este número debe estar entre " + tallaMin + " y " + tallaMax + ".";
                            // Evitar el envío del formulario
                            event.preventDefault();
                        } else {
                            // Limpiar mensaje de error si el valor es válido
                            document.getElementById("tallaPulgadaValidation").innerText = "";
                        }
                    }
                });
            }
        });

        document.addEventListener("DOMContentLoaded", function () {
            // Agregar un controlador de eventos al formulario
            document.getElementById("formularioSeguimiento").addEventListener("submit", function (event) {
                // Obtener el valor del campo de peso
                var pesoInput = document.getElementById("Peso");
                var peso = parseFloat(pesoInput.value.trim()); // Eliminar espacios en blanco y convertir a número
                var pesoMin = parseFloat(pesoInput.min);
                var pesoMax = parseFloat(pesoInput.max);

                // Verificar si el campo de peso está vacío
                if (isNaN(peso) || pesoInput.value.trim() === "") {
                    // Mostrar mensaje de error para campo obligatorio
                    document.getElementById("pesoValidationMsg").innerText = "Este campo es obligatorio.";
                    // Evitar el envío del formulario
                    event.preventDefault();
                } else if (peso < pesoMin || peso > pesoMax) {
                    // Mostrar mensaje de error para valor fuera del rango
                    document.getElementById("pesoValidationMsg").innerText = "El peso debe estar entre " + pesoMin + " y " + pesoMax + " libras.";
                    // Evitar el envío del formulario
                    event.preventDefault();
                } else {
                    // Limpiar mensaje de error si el valor es válido
                    document.getElementById("pesoValidationMsg").innerText = "";
                }
            });
        });


    </script>
}
 *@
