@model List<DatosGeneralesNacionalidad>
@using X.PagedList.Mvc.Core
@using X.PagedList;

@{
    ViewBag.Title = "ConsultaDatsosGenerales";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ProyectoPREP.Models.DbPrepContext Entidad = new ProyectoPREP.Models.DbPrepContext();
}

<a>CONSULTA DATOS GENERALES</a>


<div class="panel">

    <a asp-action="CreateCedula" asp-controller="DatosGenerales" class="btn btn-primary"><i class="fa fa-plus"></i> Crear nuevo</a>
    <br />
</div>

@* <div class="row">
    <div class="col-md-4">

        <a style="margin-left:300px" asp-action="CreateCedula" asp-controller="DatosGenerales" class="btn btn-primary"><i class="fa fa-plus"></i> Crear nuevo</a>
    </div>

</div> *@


<div class="row">
@*     <div class="col-md-4">
        <label></label>
        <input type="text" class="form-control" placeholder="Buscar por Documentacion, Nombre y Apellido" id="filtro" name="filtro" />
    </div>
    <div class="col-md-1">
        <label></label>
        <button type="submit" href="#" id="btnBuscar" name="btnBuscar" class="btn btn-primary"><i class="glyphicon glyphicon-search"></i> Buscar</button>
    </div> *@


</div>


<div style="display: none;" id="tablaContainer" class="container">
    <br>
    <table id="miTabla" class="table display" data-role="table" width="100%">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombres</th>
                <th>Apellidos</th>
                <th>Sexo</th>
                <th>Documento</th>
                <th>Nacionalidad</th>
                <th>Fecha</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Id</td>
                    <td>@item.Nombres</td>
                    <td>@item.Apellidos</td>
                    <td>@item.Sexo</td>
                    <td>@item.Documento</td>
                    <td>@item.NOMBRE_CORTO_ES</td>
                    <td>@item.Fecha_Ingreso_SAI.ToString().Substring(0, 10)</td>
                    <td>
                        <a title="Editar" class="btn" href="~/DatosGenerales/EditarDatosGenerales/@item.Id"><i class="fa-solid fa-pen-to-square"></i></a>
                        <a class="btn btn-primary " href="~/Elegibilidad/Create/@item.Id">Elegibilidad</a>
                    </td>
        
                </tr>
            }
        </tbody>    
    </table>
    
</div>
@* <div class="d-flex justify-content-center">
    <ul class="pagination" style="margin: 0 auto;">
        <li class="page-item @(Model.IsFirstPage ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("ConsultaDatosGenerales", new { page = 1 })">Primera</a>
        </li>
        <li class="page-item @(Model.IsFirstPage ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("ConsultaDatosGenerales", new { page = Model.PageNumber - 1 })">Anterior</a>
        </li>
        <li class="page-item @(Model.IsLastPage ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("ConsultaDatosGenerales", new { page = Model.PageNumber + 1 })">Siguiente</a>
        </li>
        <li class="page-item @(Model.IsLastPage ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("ConsultaDatosGenerales", new { page = Model.PageCount })">Última</a>
        </li>
    </ul>
</div> *@

@* <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
 *@
@section scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            // Configura DataTables sin mostrar la tabla
            var table = $('#miTabla').DataTable({
                columnDefs: [{
                    targets: -1,
                    className: 'right'
                }],
                "paging": true,
                "pageLength": 10,
                "searching": true,
            });

            // Después de que DataTables se haya configurado, muestra la tabla
            $('#tablaContainer').css('display', 'block');

            // Ahora, puedes ajustar la tabla según tus necesidades
            // Por ejemplo, puedes agregar búsqueda o paginación personalizada aquí
        });
    </script>
}