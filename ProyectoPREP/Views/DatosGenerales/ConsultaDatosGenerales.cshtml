@model List<DatosGeneralesNacionalidad>
@using X.PagedList.Mvc.Core
@using X.PagedList;

@{
    ViewBag.Title = "ConsultaDatsosGenerales";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ProyectoPREP.Models.DbPrepContext Entidad = new ProyectoPREP.Models.DbPrepContext();
}

<a>CONSULTA DATOS GENERALES</a>



<form action="/DatosGenerales/CreateCedula" method="post">

    

    <div class="row">

        <div class="col-md-2">
            
            <br />
            <a asp-action="CreateCedula" asp-controller="DatosGenerales" class="btn btn btn-success"><i class="fa fa-plus"></i> Crear nuevo</a>

        </div>
        <br />

        <div class="col-2">

            Ordenar por:
            <select id="EstatusSolicitud" name="EstatusSolicitud" onChange=nav(this.value) class="form-control">
                <option value="/#">--SELECCIONE--</option>
                <option value="/Elegibilidad/Create">Elegibilidad</option>
                <option value="#">Confirmación PCR</option>
                <option value="#">Pendiente a Tratamiento PreP</option>
                <option value="#">Prep Aprobado</option>
                <option value="#">Prep Rechazado</option>
                <option value="#">Prep Suspendida</option>

            </select>
        </div>

        <div class="col-4">

            Establecimiento:
            <select id="FiltroEstablecimiento" name="FiltroEstablecimiento" onChange=nav(this.value) class="form-control">
                <option value="/#">--SELECCIONE--</option>


            </select>
        </div>

    </div>

</form>




<div style="display: none;" id="tablaContainer" class="container">
    <br>
    <table id="miTabla" class="table display" data-role="table" width="100%">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombres</th>
                <th>Apellidos</th>
                <th>Sexo</th>
                <th>Documento</th>
                <th>Nacionalidad</th>
                <th>Fecha</th>
                <th>Acciones</th>

            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Id</td>
                    <td>@item.Nombres</td>
                    <td>@item.Apellidos</td>
                    <td>@item.Sexo</td>
                    <td>@item.Documento</td>
                    <td>@item.NOMBRE_CORTO_ES</td>
                    <td>@item.Fecha_Ingreso_SAI.ToString().Substring(0, 10)</td>s
                    <td>
                        <a title="Editar" class="btn" href="~/DatosGenerales/EditarDatosGenerales/@item.Id"><i class="fa-solid fa-pen-to-square"></i></a>
                        <a class="btn btnElegibilidad " href="~/Elegibilidad/Create/@item.Id">Elegibilidad</a>
                    </td>
        
                </tr>
            }
        </tbody>    
    </table>
    
</div>
@* <div class="d-flex justify-content-center">
    <ul class="pagination" style="margin: 0 auto;">
        <li class="page-item @(Model.IsFirstPage ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("ConsultaDatosGenerales", new { page = 1 })">Primera</a>
        </li>
        <li class="page-item @(Model.IsFirstPage ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("ConsultaDatosGenerales", new { page = Model.PageNumber - 1 })">Anterior</a>
        </li>
        <li class="page-item @(Model.IsLastPage ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("ConsultaDatosGenerales", new { page = Model.PageNumber + 1 })">Siguiente</a>
        </li>
        <li class="page-item @(Model.IsLastPage ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("ConsultaDatosGenerales", new { page = Model.PageCount })">Última</a>
        </li>
    </ul>
</div> *@


@section scripts{
    <script type="text/javascript">
        $(document).ready(function () {
        
            var table = $('#miTabla').DataTable({
                columnDefs: [{
                    targets: -1,
                    className: 'right'
                }],
                "paging": true,
                "pageLength": 10,
                "searching": true,
            });

     
            $('#tablaContainer').css('display', 'block');

        });

        function nav(value) {
            if (value != "") { location.href = value }
        }
    </script>
}